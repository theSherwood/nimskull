<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>compiler/mir/mirchangesets</title>
<link rel="stylesheet" type="text/css" href="../nimdoc.out.css">

<script type="text/javascript" src="../dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  if (toggleSwitch !== null) {
    toggleSwitch.addEventListener('change', switchTheme, false);
  }

  var currentTheme = localStorage.getItem('theme');
  if (!currentTheme && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    currentTheme = 'dark';
  }
  if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);

    if (currentTheme === 'dark' && toggleSwitch !== null) {
      toggleSwitch.checked = true;
    }
  }
}

window.addEventListener('DOMContentLoaded', main);
</script>

</head>
<body>
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">compiler/mir/mirchangesets</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
    &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple-boot">
      <li><a href="manual.html">Manual</a></li>
      <li><a href="style_guide.html">Style guide</a></li>
      <li><a href="contributing.html">Contribution guide</a></li>
      <li><a href="lib.html">Standard library</a></li>
      <li><a href="../theindex.html">Index</a></li>
      <li><a href="compiler/../theindex.html">Compiler docs</a></li>
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  
  <ul class="simple simple-toc" id="toc-list">
<li><a class="reference" id="order-of-application_toc" href="#order-of-application">Order of application</a></li>
<li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
  <ul class="simple simple-toc-section">
    
  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#7" id="57">Types</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#Changeset"
    title="Changeset = object
  nodes: seq[MirNode]
  rows: seq[Row]
  numTemps: uint32           ## the number of existing temporaries">Changeset</a></li>
  <li><a class="reference" href="#PreparedChangeset"
    title="PreparedChangeset = object
  nodes: seq[MirNode]
  rows: seq[Row]
  diff: int                  ## the number of additions/removals
  stagingSize: int ## the minimum amount of nodes the working area must be
                   ## able to hold">PreparedChangeset</a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#12" id="62">Procs</a>
  <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">apply
      <li><a class="reference" href="#apply%2CMirTree%2CsinkPreparedChangeset"
    title="apply(tree: var MirTree; c: sink PreparedChangeset)">apply(tree: var MirTree; c: sink PreparedChangeset)</a></li>

  </ul>
  <ul class="simple nested-toc-section">getTemp
      <li><a class="reference" href="#getTemp%2CChangeset"
    title="getTemp(c: var Changeset): TempId">getTemp(c: var Changeset): TempId</a></li>

  </ul>
  <ul class="simple nested-toc-section">initChangeset
      <li><a class="reference" href="#initChangeset%2CMirTree"
    title="initChangeset(tree: MirTree): Changeset">initChangeset(tree: MirTree): Changeset</a></li>

  </ul>
  <ul class="simple nested-toc-section">insert
      <li><a class="reference" href="#insert%2CChangeset%2CNodePosition%2CsinkMirNode"
    title="insert(c: var Changeset; at: NodePosition; n: sink MirNode)">insert(c: var Changeset; at: NodePosition; n: sink MirNode)</a></li>

  </ul>
  <ul class="simple nested-toc-section">prepare
      <li><a class="reference" href="#prepare%2CsinkChangeset"
    title="prepare(c: sink Changeset): PreparedChangeset">prepare(c: sink Changeset): PreparedChangeset</a></li>

  </ul>
  <ul class="simple nested-toc-section">remove
      <li><a class="reference" href="#remove%2CChangeset%2CMirTree%2CNodePosition"
    title="remove(c: var Changeset; tree: MirTree; at: NodePosition)">remove(c: var Changeset; tree: MirTree; at: NodePosition)</a></li>

  </ul>
  <ul class="simple nested-toc-section">replace
      <li><a class="reference" href="#replace%2CChangeset%2CMirTree%2CNodePosition%2CsinkMirNode"
    title="replace(c: var Changeset; tree: MirTree; at: NodePosition; with: sink MirNode)">replace(c: var Changeset; tree: MirTree; at: NodePosition; with: sink MirNode)</a></li>

  </ul>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#18" id="68">Templates</a>
  <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">insert
      <li><a class="reference" href="#insert.t%2CChangeset%2CMirTree%2CNodePosition%2CNodePosition%2Cuntyped%2Cuntyped"
    title="insert(c: var Changeset; tree: MirTree; at, source: NodePosition; name: untyped;
       body: untyped)">insert(c: var Changeset; tree: MirTree; at, source: NodePosition; name: untyped;
       body: untyped)</a></li>

  </ul>
  <ul class="simple nested-toc-section">replaceMulti
      <li><a class="reference" href="#replaceMulti.t%2CChangeset%2CMirTree%2CNodePosition%2Cuntyped%2Cuntyped"
    title="replaceMulti(c: var Changeset; tree: MirTree; at: NodePosition;
             name, body: untyped)">replaceMulti(c: var Changeset; tree: MirTree; at: NodePosition;
             name, body: untyped)</a></li>

  </ul>

  </ul>
</li>

</ul>

  </div>
  &nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/402e1e9081e75e1c880289d62bf80c045d8f6256/compiler/mir/mirchangesets.nim#L1"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/mir/mirchangesets.nim#L1" class="link-seesrc" target="_blank" >Edit</a>

  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  
  <p class="module-desc"><p>This module implements the <tt class="docutils literal"><span class="pre">Changeset</span></tt> API, which is the main way of applying changes to a <tt class="docutils literal"><span class="pre">MirTree</span></tt>.</p>
<p>Instead of modifying a <tt class="docutils literal"><span class="pre">MirTree</span></tt> directly, the changes (which can be insertions, replacements, or removals) are first recorded into a <tt class="docutils literal"><span class="pre">Changeset</span></tt>. This allows for recording changes independent of each other concurrently and later apply the changes all at once.</p>
<p>Before applying a <tt class="docutils literal"><span class="pre">Changeset</span></tt> to a <tt class="docutils literal"><span class="pre">MirTree</span></tt>, it has to be prepared via a call to <tt class="docutils literal"><span class="pre">prepare</span></tt> first, after which the <tt class="docutils literal"><span class="pre">Changeset</span></tt> is sealed an no further changes can be recorded. <tt class="docutils literal"><span class="pre">prepare</span></tt> is responsible from normalizing the internal representation of the <tt class="docutils literal"><span class="pre">Changeset</span></tt> and is required for the later application to work.</p>
<p>Applying the <tt class="docutils literal"><span class="pre">PreparedChangeset</span></tt> is done via <tt class="docutils literal"><span class="pre">apply</span></tt>. This integrates all recorded changes into the applied to tree,.</p>

<h1><a class="toc-backref" id="order-of-application" href="#order-of-application">Order of application</a></h1><p>Nodes are inserted <em>before</em> the node at the insertion position, meaning that it is allowed for an insertion to overlap with a removal/replacement at the <em>start</em> position. All other forms of overlapping changes are disallowed. If there exist two or more insertion at the same position, they are applied in the order the changes were recorded. That is, the nodes from the insertion recorded first are inserted first, then that of the second recorded, then the third one's, etc.</p>
</p>
  <div class="section" id="6">
<h1><a class="toc-backref" href="#6">Imports</a></h1>
<dl class="item">
<a class="reference external" href="mirtrees.html">mirtrees</a>, <a class="reference external" href="sourcemaps.html">sourcemaps</a>, <a class="reference external" href="../utils/idioms.html">../utils/idioms</a>
</dl></div>
<div class="section" id="7">
<h1><a class="toc-backref" href="#7">Types</a></h1>
<dl class="item">
<div id="Changeset">
<dt><pre><a href="mirchangesets.html#Changeset"><span class="Identifier">Changeset</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">nodes</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="mirtrees.html#MirNode"><span class="Identifier">MirNode</span></a><span class="Other">]</span>
  <span class="Identifier">rows</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">Row</span><span class="Other">]</span>
  <span class="Identifier">numTemps</span><span class="Other">:</span> <span class="Identifier">uint32</span>           <span class="Comment">## the number of existing temporaries</span>
  </pre></dt>
<dd>

Represents a set of changes to be applied to a <tt class="docutils literal"><span class="pre">MirTree</span></tt>.
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/402e1e9081e75e1c880289d62bf80c045d8f6256/compiler/mir/mirchangesets.nim#L52"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/mir/mirchangesets.nim#L52" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="PreparedChangeset">
<dt><pre><a href="mirchangesets.html#PreparedChangeset"><span class="Identifier">PreparedChangeset</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">nodes</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="mirtrees.html#MirNode"><span class="Identifier">MirNode</span></a><span class="Other">]</span>
  <span class="Identifier">rows</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">Row</span><span class="Other">]</span>
  <span class="Identifier">diff</span><span class="Other">:</span> <span class="Identifier">int</span>                  <span class="Comment">## the number of additions/removals</span>
  <span class="Identifier">stagingSize</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Comment">## the minimum amount of nodes the working area must be</span>
                   <span class="Comment">## able to hold</span>
  </pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/402e1e9081e75e1c880289d62bf80c045d8f6256/compiler/mir/mirchangesets.nim#L59"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/mir/mirchangesets.nim#L59" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#12">Procs</a></h1>
<dl class="item">
<div id="apply,MirTree,sinkPreparedChangeset">
<dt><pre><span class="Keyword">func</span> <a href="#apply%2CMirTree%2CsinkPreparedChangeset"><span class="Identifier">apply</span></a><span class="Other">(</span><span class="Identifier">tree</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="mirtrees.html#MirTree"><span class="Identifier">MirTree</span></a><span class="Other">;</span> <span class="Identifier">c</span><span class="Other">:</span> <span class="Identifier">sink</span> <a href="mirchangesets.html#PreparedChangeset"><span class="Identifier">PreparedChangeset</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Applies the changeset <tt class="docutils literal"><span class="pre"><span class="Identifier">c</span></span></tt> to the <tt class="docutils literal"><span class="pre"><span class="Identifier">tree</span></span></tt>, modifying the tree in-place. The tree's underlying sequence is resized 0 to 2 times.
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/402e1e9081e75e1c880289d62bf80c045d8f6256/compiler/mir/mirchangesets.nim#L259"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/mir/mirchangesets.nim#L259" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="getTemp,Changeset">
<dt><pre><span class="Keyword">func</span> <a href="#getTemp%2CChangeset"><span class="Identifier">getTemp</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="mirchangesets.html#Changeset"><span class="Identifier">Changeset</span></a><span class="Other">)</span><span class="Other">:</span> <a href="mirtrees.html#TempId"><span class="Identifier">TempId</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Allocates a slot for new temporary and returns its ID
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/402e1e9081e75e1c880289d62bf80c045d8f6256/compiler/mir/mirchangesets.nim#L102"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/mir/mirchangesets.nim#L102" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="initChangeset,MirTree">
<dt><pre><span class="Keyword">func</span> <a href="#initChangeset%2CMirTree"><span class="Identifier">initChangeset</span></a><span class="Other">(</span><span class="Identifier">tree</span><span class="Other">:</span> <a href="mirtrees.html#MirTree"><span class="Identifier">MirTree</span></a><span class="Other">)</span><span class="Other">:</span> <a href="mirchangesets.html#Changeset"><span class="Identifier">Changeset</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Initializes a new <tt class="docutils literal"><span class="pre">Changeset</span></tt> instance. Until the resulting <tt class="docutils literal"><span class="pre">Changeset</span></tt> is applied, the associated tree must not be modified.
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/402e1e9081e75e1c880289d62bf80c045d8f6256/compiler/mir/mirchangesets.nim#L92"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/mir/mirchangesets.nim#L92" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="insert,Changeset,NodePosition,sinkMirNode">
<dt><pre><span class="Keyword">func</span> <a href="#insert%2CChangeset%2CNodePosition%2CsinkMirNode"><span class="Identifier">insert</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="mirchangesets.html#Changeset"><span class="Identifier">Changeset</span></a><span class="Other">;</span> <span class="Identifier">at</span><span class="Other">:</span> <a href="mirtrees.html#NodePosition"><span class="Identifier">NodePosition</span></a><span class="Other">;</span> <span class="Identifier">n</span><span class="Other">:</span> <span class="Identifier">sink</span> <a href="mirtrees.html#MirNode"><span class="Identifier">MirNode</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Records the insertion of <tt class="docutils literal"><span class="pre"><span class="Identifier">n</span></span></tt> at <tt class="docutils literal"><span class="pre"><span class="Identifier">at</span></span></tt>. The <tt class="docutils literal"><span class="pre">info</span></tt> field on the node is not modified.
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/402e1e9081e75e1c880289d62bf80c045d8f6256/compiler/mir/mirchangesets.nim#L113"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/mir/mirchangesets.nim#L113" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="prepare,sinkChangeset">
<dt><pre><span class="Keyword">func</span> <a href="#prepare%2CsinkChangeset"><span class="Identifier">prepare</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <span class="Identifier">sink</span> <a href="mirchangesets.html#Changeset"><span class="Identifier">Changeset</span></a><span class="Other">)</span><span class="Other">:</span> <a href="mirchangesets.html#PreparedChangeset"><span class="Identifier">PreparedChangeset</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Prepares <tt class="docutils literal"><span class="pre"><span class="Identifier">c</span></span></tt> for being applied
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/402e1e9081e75e1c880289d62bf80c045d8f6256/compiler/mir/mirchangesets.nim#L165"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/mir/mirchangesets.nim#L165" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="remove,Changeset,MirTree,NodePosition">
<dt><pre><span class="Keyword">func</span> <a href="#remove%2CChangeset%2CMirTree%2CNodePosition"><span class="Identifier">remove</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="mirchangesets.html#Changeset"><span class="Identifier">Changeset</span></a><span class="Other">;</span> <span class="Identifier">tree</span><span class="Other">:</span> <a href="mirtrees.html#MirTree"><span class="Identifier">MirTree</span></a><span class="Other">;</span> <span class="Identifier">at</span><span class="Other">:</span> <a href="mirtrees.html#NodePosition"><span class="Identifier">NodePosition</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Records the removal of the node or sub-tree at <tt class="docutils literal"><span class="pre"><span class="Identifier">at</span></span></tt>.
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/402e1e9081e75e1c880289d62bf80c045d8f6256/compiler/mir/mirchangesets.nim#L159"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/mir/mirchangesets.nim#L159" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="replace,Changeset,MirTree,NodePosition,sinkMirNode">
<dt><pre><span class="Keyword">func</span> <a href="#replace%2CChangeset%2CMirTree%2CNodePosition%2CsinkMirNode"><span class="Identifier">replace</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="mirchangesets.html#Changeset"><span class="Identifier">Changeset</span></a><span class="Other">;</span> <span class="Identifier">tree</span><span class="Other">:</span> <a href="mirtrees.html#MirTree"><span class="Identifier">MirTree</span></a><span class="Other">;</span> <span class="Identifier">at</span><span class="Other">:</span> <a href="mirtrees.html#NodePosition"><span class="Identifier">NodePosition</span></a><span class="Other">;</span>
             <span class="Identifier">with</span><span class="Other">:</span> <span class="Identifier">sink</span> <a href="mirtrees.html#MirNode"><span class="Identifier">MirNode</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Records replacing the node or sub-tree at <tt class="docutils literal"><span class="pre"><span class="Identifier">at</span></span></tt> with <tt class="docutils literal"><span class="pre"><span class="Identifier">with</span></span></tt>.
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/402e1e9081e75e1c880289d62bf80c045d8f6256/compiler/mir/mirchangesets.nim#L107"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/mir/mirchangesets.nim#L107" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>
<div class="section" id="18">
<h1><a class="toc-backref" href="#18">Templates</a></h1>
<dl class="item">
<div id="insert.t,Changeset,MirTree,NodePosition,NodePosition,untyped,untyped">
<dt><pre><span class="Keyword">template</span> <a href="#insert.t%2CChangeset%2CMirTree%2CNodePosition%2CNodePosition%2Cuntyped%2Cuntyped"><span class="Identifier">insert</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="mirchangesets.html#Changeset"><span class="Identifier">Changeset</span></a><span class="Other">;</span> <span class="Identifier">tree</span><span class="Other">:</span> <a href="mirtrees.html#MirTree"><span class="Identifier">MirTree</span></a><span class="Other">;</span> <span class="Identifier">at</span><span class="Other">,</span> <span class="Identifier">source</span><span class="Other">:</span> <a href="mirtrees.html#NodePosition"><span class="Identifier">NodePosition</span></a><span class="Other">;</span>
                <span class="Identifier">name</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">;</span> <span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span></pre></dt>
<dd>

Records an insertion at the <tt class="docutils literal"><span class="pre"><span class="Identifier">at</span></span></tt> position, providing direct access to the internal node buffer inside <tt class="docutils literal"><span class="pre"><span class="Identifier">body</span></span></tt> via an injected variable of the name <tt class="docutils literal"><span class="pre"><span class="Identifier">name</span></span></tt>. <tt class="docutils literal"><span class="pre"><span class="Identifier">source</span></span></tt> is the node to inherit the source/origin information from
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/402e1e9081e75e1c880289d62bf80c045d8f6256/compiler/mir/mirchangesets.nim#L118"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/mir/mirchangesets.nim#L118" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="replaceMulti.t,Changeset,MirTree,NodePosition,untyped,untyped">
<dt><pre><span class="Keyword">template</span> <a href="#replaceMulti.t%2CChangeset%2CMirTree%2CNodePosition%2Cuntyped%2Cuntyped"><span class="Identifier">replaceMulti</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <span class="Keyword">var</span> <a href="mirchangesets.html#Changeset"><span class="Identifier">Changeset</span></a><span class="Other">;</span> <span class="Identifier">tree</span><span class="Other">:</span> <a href="mirtrees.html#MirTree"><span class="Identifier">MirTree</span></a><span class="Other">;</span> <span class="Identifier">at</span><span class="Other">:</span> <a href="mirtrees.html#NodePosition"><span class="Identifier">NodePosition</span></a><span class="Other">;</span>
                      <span class="Identifier">name</span><span class="Other">,</span> <span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span></pre></dt>
<dd>

Records a replacement of the node or sub-tree at the <tt class="docutils literal"><span class="pre"><span class="Identifier">at</span></span></tt> position, providing direct access to the internal node buffer inside <tt class="docutils literal"><span class="pre"><span class="Identifier">body</span></span></tt> via an injected variable of the name <tt class="docutils literal"><span class="pre"><span class="Identifier">name</span></span></tt>.
&nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/402e1e9081e75e1c880289d62bf80c045d8f6256/compiler/mir/mirchangesets.nim#L140"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/compiler/mir/mirchangesets.nim#L140" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim. Generated: 2023-12-09 00:00:00 UTC</small>
      </div>
    </div>
  </div>
</div>
</body>
</html>
