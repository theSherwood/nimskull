<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>Continuous Integration</title>
<link rel="stylesheet" type="text/css" href="nimdoc.out.css">

<script type="text/javascript" src="dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  if (toggleSwitch !== null) {
    toggleSwitch.addEventListener('change', switchTheme, false);
  }

  var currentTheme = localStorage.getItem('theme');
  if (!currentTheme && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    currentTheme = 'dark';
  }
  if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);

    if (currentTheme === 'dark' && toggleSwitch !== null) {
      toggleSwitch.checked = true;
    }
  }
}

window.addEventListener('DOMContentLoaded', main);
</script>

</head>
<body>
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">Continuous Integration</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
    &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple-boot">
      <li><a href="manual.html">Manual</a></li>
      <li><a href="style_guide.html">Style guide</a></li>
      <li><a href="contributing.html">Contribution guide</a></li>
      <li><a href="lib.html">Standard library</a></li>
      <li><a href="theindex.html">Index</a></li>
      <li><a href="compiler/theindex.html">Compiler docs</a></li>
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
    <div class="search-groupby">
    Group by:
    <select onchange="groupBy(this.value)">
      <option value="section">Section</option>
      <option value="type">Type</option>
    </select>
  </div>

  <ul class="simple simple-toc" id="toc-list">
<li><a class="reference" id="troubleshooting-failures_toc" href="#troubleshooting-failures">Troubleshooting failures</a></li>
<ul class="simple"><li><a class="reference" id="troubleshooting-failures-failing-tests_toc" href="#troubleshooting-failures-failing-tests">Failing tests</a></li>
<li><a class="reference" id="troubleshooting-failures-there-are-differences-when-building-from-source-archive-compared-to-building-from-git_toc" href="#troubleshooting-failures-there-are-differences-when-building-from-source-archive-compared-to-building-from-git">&quot;There are differences when building from source archive compared to building from git&quot;</a></li>
<li><a class="reference" id="troubleshooting-failures-reproducibility-test-failures_toc" href="#troubleshooting-failures-reproducibility-test-failures">Reproducibility test failures</a></li>
</ul><li><a class="reference" id="lifecycle-of-an-approved-pr_toc" href="#lifecycle-of-an-approved-pr">Lifecycle of an approved PR</a></li>
<ul class="simple"><li><a class="reference" id="lifecycle-of-an-approved-pr-assumptions-in-ci-design_toc" href="#lifecycle-of-an-approved-pr-assumptions-in-ci-design">Assumptions in CI design</a></li>
</ul><li><a class="reference" id="pipelines_toc" href="#pipelines">Pipelines</a></li>
<ul class="simple"><li><a class="reference" id="pipelines-build-and-test_toc" href="#pipelines-build-and-test">&quot;Build and test&quot;</a></li>
<ul class="simple"><li><a class="reference" id="build-and-test-goals_toc" href="#build-and-test-goals">Goals</a></li>
<li><a class="reference" id="build-and-test-api_toc" href="#build-and-test-api">API</a></li>
<li><a class="reference" id="build-and-test-job-dependency-graph-and-internal-api_toc" href="#build-and-test-job-dependency-graph-and-internal-api">Job dependency graph and internal API</a></li>
</ul><li><a class="reference" id="pipelines-test-compiler-build-reproducibility_toc" href="#pipelines-test-compiler-build-reproducibility">&quot;Test compiler build reproducibility&quot;</a></li>
<li><a class="reference" id="pipelines-publish_toc" href="#pipelines-publish">&quot;Publish&quot;</a></li>
</ul><li><a class="reference" id="development-guidelines_toc" href="#development-guidelines">Development guidelines</a></li>
<ul class="simple"><li><a class="reference" id="development-guidelines-general_toc" href="#development-guidelines-general">General</a></li>
<li><a class="reference" id="development-guidelines-github-actions_toc" href="#development-guidelines-github-actions">Github Actions</a></li>
</ul><li><a class="reference" id="tools_toc" href="#tools">Tools</a></li>
<ul class="simple"><li><a class="reference" id="tools-github-actions-problem-matcher_toc" href="#tools-github-actions-problem-matcher">Github Actions Problem Matcher</a></li>
<li><a class="reference" id="tools-print-all-failed-testament-results_toc" href="#tools-print-all-failed-testament-results">Print all failed testament results</a></li>
<li><a class="reference" id="tools-release-manifest-tool_toc" href="#tools-release-manifest-tool">Release manifest tool</a></li>
</ul>
</ul>

  </div>
  &nbsp;&nbsp;<a
href="https://github.com/nim-works/nimskull/tree/1ee7d3278d385a3503301fa7982e861b24602c77/doc/ci.rst#L1"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-works/nimskull/edit/devel/doc/ci.rst#L1" class="link-seesrc" target="_blank" >Edit</a>

  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  
  <p class="module-desc"><p>This document aims to be a comprehensive guide to using and developing the Continuation Integration (CI) system employed by  NimSkull.</p>

<h1><a class="toc-backref" id="troubleshooting-failures" href="#troubleshooting-failures">Troubleshooting failures</a></h1>
<h2><a class="toc-backref" id="troubleshooting-failures-failing-tests" href="#troubleshooting-failures-failing-tests">Failing tests</a></h2><p>While &quot;Run tester&quot; log will give you the full detail on the test run, it can be very hard to find the failing test in the jungle of passing tests, so there are several integrations built into CI to make this easier:</p>
<ul class="simple"><li>Github Annotations are generated for test failures:<ul class="simple"><li>If you are adding new tests in your PR, failure in any of them will be annotated and you can find them directly in the &quot;Files changed&quot; view of the PR</li>
</ul>
</li>
<li>All test failures are isolated and printed in &quot;Print all test errors&quot; step. By default Github Actions collapse this step so you'll have to expand it.</li>
</ul>

<h2><a class="toc-backref" id="troubleshooting-failures-there-are-differences-when-building-from-source-archive-compared-to-building-from-git" href="#troubleshooting-failures-there-are-differences-when-building-from-source-archive-compared-to-building-from-git">&quot;There are differences when building from source archive compared to building from git&quot;</a></h2><p>There are several reasons for why this happens:</p>
<ul class="simple"><li>The compiler is using information only available when building directly from git, and the source archive generation routine is not updated to include this information in the archive and/or the compiler build is not coded to use the stored information.</li>
<li>A cosmic ray hit the CI test system and made it generate a slightly different binary from the same source code. A re-run should clear the error in this case.</li>
</ul>
<p>To get more details about the error, open the failing workflow run and go to &quot;Summary&quot;. Scroll down to the &quot;Artifacts&quot; section and look for one named &quot;differences between binary from source archive and git&quot;. This contains an HTML report generated by <tt class="docutils literal"><span class="pre">diffoscope</span></tt> about the differences.</p>
<p>If you need more information, the binaries that were compared can be found in the following artifacts:</p>
<ul class="simple"><li>&quot;binaries from source archive&quot;</li>
<li>&quot;release binaries&quot;</li>
</ul>

<h2><a class="toc-backref" id="troubleshooting-failures-reproducibility-test-failures" href="#troubleshooting-failures-reproducibility-test-failures">Reproducibility test failures</a></h2><p>PRs to be merged are tested to make sure that the compiler build remains deterministic with regards to the environment. To learn more about why reproducible builds matter and the concepts, see the <a class="reference external" href="https://reproducible-builds.org/">Reproducible builds project</a>.</p>
<p>When tests of this category fail, the culprit usually are:</p>
<ul class="simple"><li>Your changes introduces nondeterministic variables like the current date/current time.</li>
<li>If you are writing packaging code, it should be aware that file system ordering is nondeterministic and files must be ordered in memory before they are added to archives.</li>
</ul>
<p>Text diffs are generated, but there is no highlighting and they can be hard to read when the differences are large. To help with this, companion HTML reports are also generated and can be downloaded from Github Artifacts.</p>
<p>To access the HTML report, open the failing test run and go to &quot;Summary&quot;. The reports are saved in artifacts with suffix &quot;reproducibility test diffoscope output&quot;.</p>

<h1><a class="toc-backref" id="lifecycle-of-an-approved-pr" href="#lifecycle-of-an-approved-pr">Lifecycle of an approved PR</a></h1><p>The only way to get code into  NimSkull's development branch is via PRs, and CI was developed to leverage this.</p>
<ol class="simple"><li>PR is staged for merging.</li>
<li>The PR enters the merge queue and is merged to a <tt class="docutils literal"><span class="pre">staging</span></tt> branch. Multiple PRs might be staged in this period to increase efficiency.</li>
<li>The testing pipelines test the code, generate binaries and render documentation.</li>
<li>Assuming that the <tt class="docutils literal"><span class="pre">staging</span></tt> branch passes all tests, <tt class="docutils literal"><span class="pre">devel</span></tt> is fast-forwarded to the <tt class="docutils literal"><span class="pre">staging</span></tt> head commit.</li>
<li>The &quot;Publish&quot; pipeline deploys the rendered documentation and binaries generated by the testing pipeline earlier in the staging branch.</li>
</ol>

<h2><a class="toc-backref" id="lifecycle-of-an-approved-pr-assumptions-in-ci-design" href="#lifecycle-of-an-approved-pr-assumptions-in-ci-design">Assumptions in CI design</a></h2><p>This lifecycle has a number of useful properties which we use in our approach to CI as follows:</p>
<ul class="simple"><li>Code entering <tt class="docutils literal"><span class="pre">devel</span></tt> must have passed through <tt class="docutils literal"><span class="pre">staging</span></tt>, and that <tt class="docutils literal"><span class="pre">staging</span></tt> will become the new <tt class="docutils literal"><span class="pre">devel</span></tt>:<ul class="simple"><li>This allows us to run crucial evaluation tasks on <tt class="docutils literal"><span class="pre">staging</span></tt> only, and when that passes and <tt class="docutils literal"><span class="pre">devel</span></tt> is fast-forwarded to <tt class="docutils literal"><span class="pre">staging</span></tt>, we can access prior runs and obtain build results.</li>
</ul>
</li>
<li>Only &quot;light&quot; tests have to be run on PRs to help developers debug their code before it is reviewed by a human. More time-consuming tests that are not likely to fail can be run later when the PR enters <tt class="docutils literal"><span class="pre">staging</span></tt>.</li>
</ul>

<h1><a class="toc-backref" id="pipelines" href="#pipelines">Pipelines</a></h1><p>This section describes the design of each pipeline and the dependencies between them.</p>

<h2><a class="toc-backref" id="pipelines-build-and-test" href="#pipelines-build-and-test">&quot;Build and test&quot;</a></h2>
<h3><a class="toc-backref" id="build-and-test-goals" href="#build-and-test-goals">Goals</a></h3><ul class="simple"><li>Verify that the compiler, tools, and standard library test suites pass</li>
<li>Verify that the compiler can be bootstrapped with ORC. Whether this compiler is fully functional is not tested at the moment.</li>
<li>Verify that a source archive can be built.<ul class="simple"><li>Compiler and tools built from the source archive work.</li>
<li>Building from source archive is identical to building from a git clone.</li>
</ul>
</li>
<li>Render HTML documentation for upload to Github Pages.</li>
<li>Build release binaries.</li>
</ul>

<h3><a class="toc-backref" id="build-and-test-api" href="#build-and-test-api">API</a></h3><p>This pipeline handles all the building work, but it does not handle the task of publishing it's generated data. That part is handled by the &quot;Publish&quot; pipeline.</p>
<p>To support publishing, this pipeline exports the build result as Github Artifacts, which are used by other pipelines, these artifacts are:</p>
<ul class="simple"><li>&quot;release manifest tool&quot;: contains a built copy of <tt class="docutils literal"><span class="pre">tools/release_manifest.nim</span></tt> for Linux.</li>
<li>&quot;release binaries&quot;: built via <tt class="docutils literal"><span class="pre">koch unixrelease</span></tt> and also contains related JSON metadata. These binaries are built straight from the git clone.</li>
<li>&quot;source archive&quot;: generated from the git clone.</li>
<li>&quot;Generated docs&quot;: HTML documentation generated from source. This is the <tt class="docutils literal"><span class="pre">doc/html</span></tt> folder after a <tt class="docutils literal"><span class="pre">koch docs</span></tt> run.</li>
</ul>
<p>Changes to how these artifacts are packaged must be reviewed carefully to ensure that dependent pipelines will still function.</p>
<p>This pipeline also makes use of multiple jobs, which can make tracking its success status hard. To that end, an &quot;All check passed&quot; check is provided that will reflect the final status of the pipeline. Currently this is used for integration with other tools that rely on Github Checks status.</p>

<h3><a class="toc-backref" id="build-and-test-job-dependency-graph-and-internal-api" href="#build-and-test-job-dependency-graph-and-internal-api">Job dependency graph and internal API</a></h3><p>In order to maximize throughput, steps are split into multiple dependent jobs. This allows for:</p>
<ul class="simple"><li>Unrelated steps to execute in parallel on multiple VMs.</li>
<li>Quick turn-around time for test runs without waiting for packaging to finish.</li>
</ul>
<p>Github Actions UI provides an overall look into the dependency graph which can be seen from &quot;Summary&quot; page of any &quot;Build and test&quot; <a class="reference external" href="https://github.com/nim-works/nimskull/actions/workflows/ci.yml">workflow run</a>.</p>
<p>In addition to the public API, there are several internal APIs used for sharing data between jobs in this pipeline:</p>
<ul class="simple"><li><p>&quot;Download compiler&quot; and &quot;Upload compiler&quot; actions: These can be found in <tt class="docutils literal"><span class="pre">.github/actions/download-compiler</span></tt> and <tt class="docutils literal"><span class="pre">.github/actions/upload-compiler</span></tt> respectively. These actions allow a job to upload its workspace, all files changed/generated compared to the git source code, and allow that to be downloaded by dependent jobs.</p>
<p>This is used to replicate the &quot;workspace with binaries&quot; across parallel jobs so they can run independently.</p>
</li>
<li><p>&quot;binaries from source archive&quot;: Contains binaries built from the source archive generated from the git clone. This is generated by <tt class="docutils literal"><span class="pre">source_binaries</span></tt> job and will be compared to a similar artifact generated by the <tt class="docutils literal"><span class="pre">package</span></tt> job.</p>
<p>For the comparison to succeed, it's crucial that the packaging code is the same between <tt class="docutils literal"><span class="pre">source_binaries</span></tt> and <tt class="docutils literal"><span class="pre">package</span></tt>.</p>
</li>
<li><tt class="docutils literal"><span class="pre">pre_run</span></tt> outputs: The <tt class="docutils literal"><span class="pre">pre_run</span></tt> job provides data that dictates how CI will be run:<ul class="simple"><li><tt class="docutils literal"><span class="pre">skipped</span></tt>: Whether a run should be skipped.</li>
<li><tt class="docutils literal"><span class="pre">matrix</span></tt>: The target matrix shared between jobs.</li>
</ul>
</li>
</ul>

<h2><a class="toc-backref" id="pipelines-test-compiler-build-reproducibility" href="#pipelines-test-compiler-build-reproducibility">&quot;Test compiler build reproducibility&quot;</a></h2><p>This pipeline verifies that the compiler can be deterministically built. See the <a class="reference external" href="https://reproducible-builds.org/">Reproducible builds project</a> for more information on the testing criteria.</p>
<p>This pipeline has a rather long runtime, and rarely fails, so it is only run once a PR enters <tt class="docutils literal"><span class="pre">staging</span></tt>.</p>
<p>This pipeline is developed with a rather standard matrix and does not perform any data sharing. Working with this pipeline only requires understanding on the <a class="reference external" href="https://pypi.org/project/reprotest/">reprotest</a> tool.</p>

<h2><a class="toc-backref" id="pipelines-publish" href="#pipelines-publish">&quot;Publish&quot;</a></h2><p>Publishes build results from prior run of the &quot;Build and test&quot; pipeline on <tt class="docutils literal"><span class="pre">staging</span></tt> branch. Changes to the public API of &quot;Build and test&quot; must be tested against &quot;Publish&quot;.</p>
<p>This pipeline will perform pushes to the repository, so a lot of care must be put into any changes to it.</p>
<p>Only one instance of this pipeline might be run at any given time, due to its mutating nature. Currently Github Action's <tt class="docutils literal"><span class="pre">concurrency</span></tt> feature is used to block multiple runs.</p>

<h1><a class="toc-backref" id="development-guidelines" href="#development-guidelines">Development guidelines</a></h1>
<h2><a class="toc-backref" id="development-guidelines-general" href="#development-guidelines-general">General</a></h2><ul class="simple"><li>Each CI VM is weak, so prioritize parallelization by dividing the work into multiple independent jobs that can be executed by multiple VMs.</li>
<li>Avoid repeated runs by extracting as many build results from other pipelines/jobs as possible: CI concurrency is limited, so running less is preferable.</li>
<li>Steps and errors should be as descriptive as possible: Developers must understand how testing is done in order to debug their code.</li>
<li>Make jobs that provide highly relevant statuses run as early as possible, for example, tests should be run as soon as it can be done. If tests don't pass reproducibility is a moot point.</li>
<li>Pipelines that generate release artifacts should use pinned dependencies and OS. This avoid breakage due to random differences in software version.</li>
</ul>

<h2><a class="toc-backref" id="development-guidelines-github-actions" href="#development-guidelines-github-actions">Github Actions</a></h2><ul class="simple"><li>Prefer using a version tag. This makes sure that errorneous updates to an action will not cause our CI to fail.</li>
</ul>

<h1><a class="toc-backref" id="tools" href="#tools">Tools</a></h1><p>This section documents some of the tools created for use by CI.</p>

<h2><a class="toc-backref" id="tools-github-actions-problem-matcher" href="#tools-github-actions-problem-matcher">Github Actions Problem Matcher</a></h2><p>A <a class="reference external" href="https://github.com/actions/toolkit/blob/main/docs/problem-matchers.md">problem matcher</a> for NimSkull code is provided at <tt class="docutils literal"><span class="pre">.github/nim-problem-matcher.json</span></tt>.</p>
<p>This can be loaded into a job with</p>
<pre class="listing"><span class="Identifier">echo</span> <span class="StringLit">&quot;::add-matcher::.github/nim-problem-matcher.json&quot;</span></pre><p>and will convert all messages generated by the  NimSkull compiler into annotations.</p>

<h2><a class="toc-backref" id="tools-print-all-failed-testament-results" href="#tools-print-all-failed-testament-results">Print all failed testament results</a></h2><p><tt class="docutils literal"><span class="pre">tools/ci_testresults.nim</span></tt> can be used to print only test failures from a testament run.</p>
<p>Use this after a failed testament run to provide developers with a dedicated view of all test failures.</p>
<p>It is also integrated with Github Actions to generate file annotations for failed tests.</p>

<h2><a class="toc-backref" id="tools-release-manifest-tool" href="#tools-release-manifest-tool">Release manifest tool</a></h2><p>Located at <tt class="docutils literal"><span class="pre">tools/release_manifest.nim</span></tt>, this tool can be used to compose a release manifest or to query it. This tool can be run on developer machine and has rather comprehensive built-in documentation, please refer to that for more details. </p>
</p>
  
  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim. Generated: 2023-03-07 00:00:00 UTC</small>
      </div>
    </div>
  </div>
</div>
</body>
</html>
